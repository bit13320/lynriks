<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Madonna</title>
	<style>
		#box {
			height: 100px;
			width: 600px;
			border: 1px solid black;
			margin: 20px auto;
			text-align: center;
			line-height: 100px;
		}

		.red {
			background-color: red;
		}

		.green {
			background-color: green;
		}
	</style>
</head>
<body>
	<audio id="music" controls>
		<source src="Madonna.mp3" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>
	<div id="box">请选择适当单词填空</div>

	<script>
		var music = document.getElementById("music");
		var box = document.getElementById("box");
		var buttons = document.createElement("div");
		buttons.innerHTML = '<button id="buttonA">A：freedom</button><button id="buttonB">B：impressed</button><button id="buttonC">C：nines</button><button id="buttonD">D：heel</button>';
		box.appendChild(buttons);

		music.addEventListener("timeupdate", function() {
			if (music.currentTime >= 82) {
				setTimeout(function() {
					buttons.remove();
				}, 1000);
				var buttonC = document.getElementById("buttonC");
				buttonC.addEventListener("click", function() {
					this.classList.add("green");
					setTimeout(function() {
						buttons.remove();
					}, 1000);
				});
				var buttonA = document.getElementById("buttonA");
				var buttonB = document.getElementById("buttonB");
				var buttonD = document.getElementById("buttonD");

				var timeout = setTimeout(function() {
					music.pause();
				}, 7000);

				buttonA.addEventListener("click", function() {
					this.classList.add("red");
					clearTimeout(timeout);
					music.currentTime = 80;
					setTimeout(function() {
						buttons.remove();
					}, 1000);
				});

				buttonB.addEventListener("click", function() {
					this.classList.add("red");
					clearTimeout(timeout);
					music.currentTime = 80;
					setTimeout(function() {
						buttons.remove();
					}, 1000);
				});

				buttonD.addEventListener("click", function() {
					this.classList.add("red");
					clearTimeout(timeout);
					music.currentTime = 80;
					setTimeout(function() {
						buttons.remove();
					}, 1000);
				});
			}
		});
	</script>
</body>
</html>